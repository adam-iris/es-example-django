{% extends 'es_common/base.html' %}
{% load static %}

{% block css %}
  {{ block.super }}
  <link rel="stylesheet" href="{% static 'kafka_example/kafka-example.css' %}">
{% endblock css %}

{% block content %}

  {% if messages %}
    <div class="messages">
        {% for message in messages %}
        <div{% if message.tags %} class="{{ message.tags }}"{% endif %}>
            {{ message }}
        </div>
        {% endfor %}
    </div>
  {% endif %}

  <h1>Django Example</h1>

  <p>
    Click the button to POST a message. You can type a message or the server
    will make up one for you.
  </p>

  <form class="message-form" method="post">{% csrf_token %}
    <div class="input-group">
      {{ form.value }}
      <button type="submit" class="btn btn-primary">Send</button>
    </div>
  </form>

  {% if recent %}
    <h3>Latest Archived</h3>
    {% for item in recent %}
    <div class="card latest">
      <div class="card-header">
        <span class="value">{{ item.value }}</span>
        <span class="timestamp">{{ item.timestamp }}</span>
      </div>
      <div class="details">
        <ul class="card">
          <li><b>Data Id</b> {{ item.data_id }}</li>
          <li><b>Started</b> {{ item.timestamp }}</li>
          <li><b>Received</b> {{ item.created_date }}</li>
          <li><b>Delay</b> {{ item.delay_ms }}ms</li>
          <li><b>Value</b> {{ item.value }}</li>
          <li><b>Provenance</b>
            <ul class="provenance">
              {% for prov in item.data_provenance %}
                <li>{{ prov }}</li>
              {% endfor %}
            </ul>
          </li>
        </ul>
      </div>
    </div>
    {% endfor %}
  {% endif %}

{% endblock content %}